RETURN FIRST(
  INSERT @var1 IN @@deliveries
  RETURN NEW._key
)

// Peak memory usage: 32768 bytes

// ----------------------------------------------------------------

WITH @@deliveries
LET v_delivery1 = DOCUMENT(@@deliveries, @v_newEntityId1)
RETURN (IS_NULL(v_delivery1) ? null : {
  "deliveryNumber": v_delivery1.`deliveryNumber`
})

// Peak memory usage: 0 bytes

// ----------------------------------------------------------------

WITH @@deliveries
RETURN FIRST(
  INSERT @var1 IN @@forwarders
  RETURN NEW._key
)

// Peak memory usage: 32768 bytes

// ----------------------------------------------------------------

WITH @@deliveries, @@forwarders
LET v_forwarder1 = DOCUMENT(@@forwarders, @v_newEntityId1)
RETURN (IS_NULL(v_forwarder1) ? null : {
  "name": v_forwarder1.`name`
})

// Peak memory usage: 0 bytes

// ----------------------------------------------------------------

WITH @@deliveries, @@forwarders
RETURN {
  "logistics": {
    "delivery": {
      "createDelivery": @v_createDelivery1
    },
    "createForwarder": @v_createForwarder1
  }
}

// Peak memory usage: 0 bytes
