WITH @@roots
RETURN {
  "allRoot2s": (
    FOR v_root21
    IN @@root2s
    RETURN {
      "name": v_root21.`name`,
      "roots": (
        FOR v_root1
        IN OUTBOUND v_root21 @@root2s_roots
        FILTER v_root1 != null
        SORT (v_root1.`name`)
        RETURN {
          "grandchildren": (
            FOR v_grandchild1
            IN v_root1.`children`[*].`children`[*][**]
            RETURN {
              "parent": { __cruddl_runtime_error_code: @var1, __cruddl_runtime_error: @var2 },
              "root": {
                "name": v_root1.`name`
              }
            }
          ),
          "extensionGrandchildren": (
            FOR v_extensionGrandchild1
            IN v_root1.`children`[*].`extension`.`children`[*][**]
            RETURN {
              "parent": { __cruddl_runtime_error_code: @var3, __cruddl_runtime_error: @var4 },
              "root": {
                "name": v_root1.`name`
              }
            }
          )
        }
      ),
      "rootGrandchildren": (
        FOR v_grandchild2
        IN (
          FOR v_node1, v_edge1, v_path1 IN @var5..@var6 OUTBOUND v_root21 @@root2s_roots
          FILTER v_node1 != null
          RETURN (
            FOR v_entity1 IN v_node1.`children`[*].`children`[*][**]
            RETURN { obj: v_entity1, root: v_node1 }
          )
        )[**]
        SORT (v_grandchild2.`obj`.`name`)
        RETURN {
          "name": v_grandchild2.`obj`.`name`,
          "parent": { __cruddl_runtime_error_code: @var7, __cruddl_runtime_error: @var8 },
          "root": {
            "name": v_grandchild2.`root`.`name`
          }
        }
      ),
      "rootExtensionGrandchildren": (
        FOR v_extensionGrandchild2
        IN (
          FOR v_node2, v_edge2, v_path2 IN @var9..@var10 OUTBOUND v_root21 @@root2s_roots
          FILTER v_node2 != null
          RETURN (
            FOR v_entity2 IN v_node2.`children`[*].`extension`.`children`[*][**]
            RETURN { obj: v_entity2, root: v_node2 }
          )
        )[**]
        SORT (v_extensionGrandchild2.`obj`.`name`)
        RETURN {
          "name": v_extensionGrandchild2.`obj`.`name`,
          "parent": { __cruddl_runtime_error_code: @var11, __cruddl_runtime_error: @var12 },
          "root": {
            "name": v_extensionGrandchild2.`root`.`name`
          }
        }
      )
    }
  )
}

// Peak memory usage: 2457600 bytes
