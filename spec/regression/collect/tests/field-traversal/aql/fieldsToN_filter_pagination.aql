LET v_delivery1 = FIRST((
  FOR v_delivery2
  IN @@deliveries
  FILTER (v_delivery2.`deliveryNumber` == @var1)
  LIMIT @var2
  RETURN v_delivery2
))
RETURN {
  "Delivery": (IS_NULL(v_delivery1) ? null : {
    "allItems": (
      FOR v_deliveryItem1
      IN v_delivery1.`deliveryContents`[*].`items`[*][**]
      FILTER (RIGHT(v_deliveryItem1.`itemNumber`, LENGTH(@var3)) == @var4)
      LIMIT @var5, @var6
      RETURN {
        "itemNumber": v_deliveryItem1.`itemNumber`
      }
    )
  })
}

// Peak memory usage: 163840 bytes
