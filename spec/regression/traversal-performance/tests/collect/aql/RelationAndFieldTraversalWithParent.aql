WITH @@roots
LET v_super1 = FIRST((
  FOR v_super2
  IN @@supers
  FILTER (v_super2.`key` == @var1)
  LIMIT @var2
  RETURN v_super2
))
RETURN {
  "Super": (IS_NULL(v_super1) ? null : {
    "rootChildren": (
      FOR v_child1
      IN (
        FOR v_node1, v_edge1, v_path1 IN @var3..@var4 OUTBOUND v_super1 @@supers_roots
        FILTER v_node1 != null
        RETURN (
          FOR v_entity1 IN v_node1.`children`[*]
          RETURN { obj: v_entity1, root: v_node1 }
        )
      )[**]
      LET v_root1 = v_child1.`root`
      RETURN {
        "key": v_child1.`obj`.`key`,
        "parent": (IS_NULL(v_root1) ? null : {
          "key": v_root1.`key`
        })
      }
    )
  })
}
