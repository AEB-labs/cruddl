RETURN (
  FOR v_currentEntity1
  IN (
    FOR v_delivery1
    IN @@deliveries
    FILTER (v_delivery1._key == @var1)
    LIMIT @var2
    RETURN v_delivery1
  )
  UPDATE v_currentEntity1
  WITH {
    "items": (
      FOR v_deliveryItem1
      IN (IS_LIST(v_currentEntity1.`items`) ? v_currentEntity1.`items` : [])
      RETURN ((v_deliveryItem1.`id` == @var3) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var4,
        "updatedAt": @var5
      }) : ((v_deliveryItem1.`id` == @var6) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var7,
        "updatedAt": @var8
      }) : ((v_deliveryItem1.`id` == @var9) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var10,
        "updatedAt": @var11
      }) : ((v_deliveryItem1.`id` == @var12) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var13,
        "updatedAt": @var14
      }) : ((v_deliveryItem1.`id` == @var15) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var16,
        "updatedAt": @var17
      }) : ((v_deliveryItem1.`id` == @var18) ? MERGE(v_deliveryItem1, {
        "itemNumber": @var19,
        "updatedAt": @var20
      }) : v_deliveryItem1))))))
    ),
    "updatedAt": @var21
  }
  IN @@deliveries
  OPTIONS { mergeObjects: false }
  RETURN NEW._key
)

// --------------------------------

WITH @@deliveries
LET v_delivery1 = DOCUMENT(@@deliveries, @var1)
RETURN (IS_NULL(v_delivery1) ? null : {
  "items": (
    FOR v_deliveryItem1
    IN (IS_LIST(v_delivery1.`items`) ? v_delivery1.`items` : [])
    RETURN {
      "id": v_deliveryItem1.`id`,
      "itemNumber": v_deliveryItem1.`itemNumber`
    }
  )
})

// --------------------------------

WITH @@deliveries
RETURN {
  "updateDelivery": @v_updateDelivery1
}
