RETURN (
  FOR v_currentEntity1
  IN (
    FOR v_numberRange1
    IN @@numberRanges
    FILTER (v_numberRange1._key == @var1)
    LIMIT @var2
    RETURN v_numberRange1
  )
  UPDATE v_currentEntity1
  WITH {
    "number": (v_currentEntity1.`number` + @var3),
    "updatedAt": @var4
  }
  IN @@numberRanges
  OPTIONS { mergeObjects: false }
  RETURN NEW._key
)

// Peak memory usage: 65536 bytes

// ----------------------------------------------------------------

WITH @@numberRanges
LET v_numberRange1 = DOCUMENT(@@numberRanges, @var1)
RETURN (IS_NULL(v_numberRange1) ? null : {
  "number": v_numberRange1.`number`
})

// Peak memory usage: 0 bytes

// ----------------------------------------------------------------

WITH @@numberRanges
RETURN {
  "updateNumberRange": @v_updateNumberRange1
}

// Peak memory usage: 0 bytes
