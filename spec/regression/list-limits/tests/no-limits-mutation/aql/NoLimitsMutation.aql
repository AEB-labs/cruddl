RETURN (
  FOR v_currentEntity1
  IN (
    FOR v_hero1
    IN @@heroes
    RETURN v_hero1
  )
  UPDATE v_currentEntity1
  WITH {
    "name": @var1,
    "updatedAt": @var2
  }
  IN @@heroes
  OPTIONS { mergeObjects: false }
  RETURN NEW._key
)

// Peak memory usage: 65536 bytes

// ----------------------------------------------------------------

WITH @@heroes
RETURN (
  FOR v_hero1
  IN (
    FOR v_id1
    IN @v_updatedIds1
    RETURN DOCUMENT(@@heroes, v_id1)
  )
  RETURN {
    "name": v_hero1.`name`
  }
)

// Peak memory usage: 32768 bytes

// ----------------------------------------------------------------

WITH @@heroes
RETURN (
  FOR v_hero1
  IN (
    FOR v_hero2
    IN @@heroes
    REMOVE v_hero2
    IN @@heroes
    RETURN OLD
  )
  RETURN {
    "name": v_hero1.`name`
  }
)

// Peak memory usage: 32768 bytes

// ----------------------------------------------------------------

WITH @@heroes
RETURN {
  "updateAllHeroes": @v_updateAllHeroes1,
  "deleteAllHeroes": @v_deleteAllHeroes1
}

// Peak memory usage: 0 bytes
